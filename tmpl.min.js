!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tmpl=e():t.tmpl=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n=r(1),i=r(12);t.exports={parse:n.parse,html:function(t,e){return i.getHTMLString(t,e)},traverse:function(t){return{handle:function(e,r){n.traverse(t).when(e,r)}}}}},function(t,e,r){var n=r(2),i=r(3),a=r(4),o=r(6),s=r(5);t.exports={_modules:{include:r(9),partial:r(11)},_regex:{forVariables:/\{\{ ?(.*?) ?\}\}/g},safeReplaceCaseReg:/\r|\n|\t|\/\*[\s\S]*?\*\//g,safeReplaceCasePlace:"",_includeStack:{},parse:function(t,e){var r=new n.DefaultHandler(e||this.defaultHandler,{ignoreWhitespace:!0}),i=new n.Parser(r);return i.parseComplete(t),r.dom},_traverseTagAttributes:function(t){var e=i.clone(t);return i.eachObject(e,function(t){return this._traverseText({data:t})}.bind(this))},_replaceAllUncertainStuff:function(t){return t.trim().replace(this.safeReplaceSingleQuotesReg,this.safeReplaceSingleQuotesPlace).replace(this.safeReplaceCaseReg,this.safeReplaceCasePlace)},_searchForVars:function(t){return i.mapForLoop(t,function(t){return t.split(this._regex.forVariables).join("")}.bind(this))},_replaceAndCreateStatements:function(t,e){return i.mapForLoop(t,function(t){return a.checkStatementForInners(t,e)}.bind(this))},_createDataObject:function(t,e){return e?t.data=this._replaceAndCreateStatements(t.data,e):t.data=s.createDataText(t.data[0]),t},_replaceMatch:function(t){var e,r=this._replaceAllUncertainStuff(t.data),n=r.match(this._regex.forVariables);return n&&(e=this._searchForVars(n)),t.data=r.split(this._regex.forVariables),this._createDataObject(t,e)},_lookForStatements:function(t){return this._replaceMatch(t)},_whatMethodShouldYouUse:function(t){return s.isTag(t.type)?this._modules[t.name]?this._traverseModule:this._traverseTag:s.isText(t.type)?this._traverseText:void 0},actionOnMainArray:function(t,e){if(void 0!==e)if(e.length>0)for(var r=0;r<e.length;r++)t.concat(this.actionOnMainArray(t,e[r]));else t.push(e);return e=null,t},_collect:function(t,e){var r=t.call(this,e);return s.isTagInclude(e.name)?void(this._includeStack[e.attribs.name]=r):r},traversingAST:function(t){for(var e,r,n=[],i=0;i<t.length;i++)e=this._whatMethodShouldYouUse(t[i]),e&&(r=this._collect(e,t[i]),void 0!==r&&n.push(r));return o.every(n)},traverse:function(t){return this.traversingAST(t).when(function(t){return this.actionOnMainArray([],t)}.bind(this),function(t){throw new Error(t)})},_generatorFunctionForTags:function(t,e){return t.children=this.actionOnMainArray([],e),t},traverseTagWithChildren:function(t){return this.traversingAST(t.children).when(function(e){return this._generatorFunctionForTags(t,e)}.bind(this),function(t){throw new Error(t)})},_traverseTag:function(t){var e,r=this._traverseTagAttributes(t.attribs),n=this._createTag(t.name,t.data,t.raw,r,t.children);return n.children&&n.children.length>0?this.traverseTagWithChildren(n):(e=o.make(),e.keep(this._generatorFunctionForTags(n)),e.promise)},_traverseModule:function(t){var e=s.moduleMatcher.call(this,t);return s.loadModuleFunction.call(this,e,t)},_traverseText:function(t){var t=i.clone(t),e=o.make();return t.hasOwnProperty("type")?(t.raw=this._replaceAllUncertainStuff(t.raw),e.keep(this._lookForStatements(t)),e.promise):this._lookForStatements(t)},_createTag:function(t,e,r,n,i){return{name:t,data:e,raw:r,attribs:n,children:i,type:"tag"}},defaultHandler:function(t,e){if(t)throw new Error(t)}}},function(t,e,r){(function(r,n){!function(){function i(){return"object"==typeof e&&"object"==typeof t&&"string"==typeof r&&"string"==typeof n}function a(t,e){this._options=e?e:{},void 0==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(t),this._handler=t,this.reset()}function o(t){o.super_.call(this,t,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function s(t,e){this.reset(),this._options=e?e:{},void 0==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),void 0==this._options.verbose&&(this._options.verbose=!0),void 0==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),"function"==typeof t&&(this._callback=t)}function c(t,e){var r=function(){};r.prototype=e.prototype,t.super_=e,t.prototype=new r,t.prototype.constructor=t}if(!i()){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},e=this.Tautologistics.NodeHtmlParser}var l={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};a._reTrim=/(^\s+|\s+$)/g,a._reTrimComment=/(^\!--|--$)/g,a._reWhitespace=/\s/g,a._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,a._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,a._reTags=/[\<\>]/g,a.prototype.parseComplete=function(t){this.reset(),this.parseChunk(t),this.done()},a.prototype.parseChunk=function(t){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=t,this.parseTags()},a.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var t=this._buffer;this._buffer="";var e={raw:t,data:this._parseState==l.Text?t:t.replace(a._reTrim,""),type:this._parseState};(this._parseState==l.Tag||this._parseState==l.Script||this._parseState==l.Style)&&(e.name=this.parseTagName(e.data)),this.parseAttribs(e),this._elements.push(e)}this.writeHandler(),this._handler.done()}},a.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=l.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},a.prototype._options=null,a.prototype._handler=null,a.prototype._buffer=null,a.prototype._done=!1,a.prototype._elements=null,a.prototype._elementsCurrent=0,a.prototype._current=0,a.prototype._next=0,a.prototype._location=null,a.prototype._parseState=l.Text,a.prototype._prevTagSep="",a.prototype._tagStack=null,a.prototype.parseTagAttribs=function(t){for(var e=t.length,r=0;e>r;){var n=t[r++];(n.type==l.Tag||n.type==l.Script||n.type==l.style)&&this.parseAttribs(n)}return t},a.prototype.parseAttribs=function(t){if(t.type==l.Script||t.type==l.Style||t.type==l.Tag){var e=t.data.split(a._reWhitespace,1)[0],r=t.data.substring(e.length);if(!(r.length<1)){var n;for(a._reAttrib.lastIndex=0;n=a._reAttrib.exec(r);)void 0==t.attribs&&(t.attribs={}),"string"==typeof n[1]&&n[1].length?t.attribs[n[1]]=n[2]:"string"==typeof n[3]&&n[3].length?t.attribs[n[3].toString()]=n[4].toString():"string"==typeof n[5]&&n[5].length?t.attribs[n[5]]=n[6]:"string"==typeof n[7]&&n[7].length&&(t.attribs[n[7]]=n[7])}}},a.prototype.parseTagName=function(t){if(null==t||""==t)return"";var e=a._reTagName.exec(t);return e?(e[1]?"/":"")+e[2]:""},a.prototype.parseTags=function(){for(var t=this._buffer.length-1;a._reTags.test(this._buffer);){this._next=a._reTags.lastIndex-1;var e=this._buffer.charAt(this._next),r=this._buffer.substring(this._current,this._next),n={raw:r,data:this._parseState==l.Text?r:r.replace(a._reTrim,""),type:this._parseState},i=this.parseTagName(n.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==l.Script){if("/script"==i.toLowerCase())this._tagStack.pop();else if(0!=n.raw.indexOf("!--")&&(n.type=l.Text,this._elements.length&&this._elements[this._elements.length-1].type==l.Text)){var o=this._elements[this._elements.length-1];o.raw=o.data=o.raw+this._prevTagSep+n.raw,n.raw=n.data=""}}else if(this._tagStack[this._tagStack.length-1]==l.Style){if("/style"==i.toLowerCase())this._tagStack.pop();else if(0!=n.raw.indexOf("!--"))if(n.type=l.Text,this._elements.length&&this._elements[this._elements.length-1].type==l.Text){var o=this._elements[this._elements.length-1];""!=n.raw?(o.raw=o.data=o.raw+this._prevTagSep+n.raw,n.raw=n.data=""):o.raw=o.data=o.raw+this._prevTagSep}else""!=n.raw&&(n.raw=n.data=n.raw)}else if(this._tagStack[this._tagStack.length-1]==l.Comment){var s=n.raw.length;if("-"==n.raw.charAt(s-2)&&"-"==n.raw.charAt(s-1)&&">"==e)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==l.Comment){var o=this._elements[this._elements.length-1];o.raw=o.data=(o.raw+n.raw).replace(a._reTrimComment,""),n.raw=n.data="",n.type=l.Text}else n.type=l.Comment;else if(n.type=l.Comment,this._elements.length&&this._elements[this._elements.length-1].type==l.Comment){var o=this._elements[this._elements.length-1];o.raw=o.data=o.raw+n.raw+e,n.raw=n.data="",n.type=l.Text}else n.raw=n.data=n.raw+e}if(n.type==l.Tag){n.name=i;var c=i.toLowerCase();if(0==n.raw.indexOf("!--")){n.type=l.Comment,delete n.name;var s=n.raw.length;"-"==n.raw.charAt(s-1)&&"-"==n.raw.charAt(s-2)&&">"==e?n.raw=n.data=n.raw.replace(a._reTrimComment,""):(n.raw+=e,this._tagStack.push(l.Comment))}else 0==n.raw.indexOf("!")||0==n.raw.indexOf("?")?n.type=l.Directive:"script"==c?(n.type=l.Script,"/"!=n.data.charAt(n.data.length-1)&&this._tagStack.push(l.Script)):"/script"==c?n.type=l.Script:"style"==c?(n.type=l.Style,"/"!=n.data.charAt(n.data.length-1)&&this._tagStack.push(l.Style)):"/style"==c&&(n.type=l.Style);n.name&&"/"==n.name.charAt(0)&&(n.data=n.name)}(""!=n.raw||n.type!=l.Text)&&(this._options.includeLocation&&!n.location&&(n.location=this.getLocation(n.type==l.Tag)),this.parseAttribs(n),this._elements.push(n),n.type!=l.Text&&n.type!=l.Comment&&n.type!=l.Directive&&"/"==n.data.charAt(n.data.length-1)&&this._elements.push({raw:"/"+n.name,data:"/"+n.name,name:"/"+n.name,type:n.type})),this._parseState="<"==e?l.Tag:l.Text,this._current=this._next+1,this._prevTagSep=e}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=t?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},a.prototype.getLocation=function(t){for(var e,r=this._location,n=this._current-(t?1:0),i=t&&0==r.charOffset&&0==this._current;r.charOffset<n;r.charOffset++)e=this._buffer.charAt(r.charOffset),"\n"==e?(r.inBuffer++,r.col=0):"\r"!=e&&r.col++;return{line:r.row+r.inBuffer+1,col:r.col+(i?0:1)}},a.prototype.validateHandler=function(t){if("object"!=typeof t)throw new Error("Handler is not an object");if("function"!=typeof t.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof t.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof t.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof t.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof t.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof t.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},a.prototype.writeHandler=function(t){if(t=!!t,!this._tagStack.length||t)for(;this._elements.length;){var e=this._elements.shift();switch(e.type){case l.Comment:this._handler.writeComment(e);break;case l.Directive:this._handler.writeDirective(e);break;case l.Text:this._handler.writeText(e);break;default:this._handler.writeTag(e)}}},a.prototype.handleError=function(t){if("function"!=typeof this._handler.error)throw t;this._handler.error(t)},c(o,s),o.prototype.done=function(){var t,e={},r=u.getElementsByTagName(function(t){return"rss"==t||"feed"==t},this.dom,!1);if(r.length&&(t=r[0]),t){if("rss"==t.name){e.type="rss",t=t.children[0],e.id="";try{e.title=u.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(n){}try{e.link=u.getElementsByTagName("link",t.children,!1)[0].children[0].data}catch(n){}try{e.description=u.getElementsByTagName("description",t.children,!1)[0].children[0].data}catch(n){}try{e.updated=new Date(u.getElementsByTagName("lastBuildDate",t.children,!1)[0].children[0].data)}catch(n){}try{e.author=u.getElementsByTagName("managingEditor",t.children,!1)[0].children[0].data}catch(n){}e.items=[],u.getElementsByTagName("item",t.children).forEach(function(t,r,n){var i={};try{i.id=u.getElementsByTagName("guid",t.children,!1)[0].children[0].data}catch(a){}try{i.title=u.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(a){}try{i.link=u.getElementsByTagName("link",t.children,!1)[0].children[0].data}catch(a){}try{i.description=u.getElementsByTagName("description",t.children,!1)[0].children[0].data}catch(a){}try{i.pubDate=new Date(u.getElementsByTagName("pubDate",t.children,!1)[0].children[0].data)}catch(a){}e.items.push(i)})}else{e.type="atom";try{e.id=u.getElementsByTagName("id",t.children,!1)[0].children[0].data}catch(n){}try{e.title=u.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(n){}try{e.link=u.getElementsByTagName("link",t.children,!1)[0].attribs.href}catch(n){}try{e.description=u.getElementsByTagName("subtitle",t.children,!1)[0].children[0].data}catch(n){}try{e.updated=new Date(u.getElementsByTagName("updated",t.children,!1)[0].children[0].data)}catch(n){}try{e.author=u.getElementsByTagName("email",t.children,!0)[0].children[0].data}catch(n){}e.items=[],u.getElementsByTagName("entry",t.children).forEach(function(t,r,n){var i={};try{i.id=u.getElementsByTagName("id",t.children,!1)[0].children[0].data}catch(a){}try{i.title=u.getElementsByTagName("title",t.children,!1)[0].children[0].data}catch(a){}try{i.link=u.getElementsByTagName("link",t.children,!1)[0].attribs.href}catch(a){}try{i.description=u.getElementsByTagName("summary",t.children,!1)[0].children[0].data}catch(a){}try{i.pubDate=new Date(u.getElementsByTagName("updated",t.children,!1)[0].children[0].data)}catch(a){}e.items.push(i)})}this.dom=e}o.super_.prototype.done.call(this)},s._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},s.reWhitespace=/^\s*$/,s.prototype.dom=null,s.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},s.prototype.done=function(){this._done=!0,this.handleCallback(null)},s.prototype.writeTag=function(t){this.handleElement(t)},s.prototype.writeText=function(t){this._options.ignoreWhitespace&&s.reWhitespace.test(t.data)||this.handleElement(t)},s.prototype.writeComment=function(t){this.handleElement(t)},s.prototype.writeDirective=function(t){this.handleElement(t)},s.prototype.error=function(t){this.handleCallback(t)},s.prototype._options=null,s.prototype._callback=null,s.prototype._done=!1,s.prototype._tagStack=null,s.prototype.handleCallback=function(t){if("function"==typeof this._callback)this._callback(t,this.dom);else if(t)throw t},s.prototype.isEmptyTag=function(t){var e=t.name.toLowerCase();return"/"==e.charAt(0)&&(e=e.substring(1)),this._options.enforceEmptyTags&&!!s._emptyTags[e]},s.prototype.handleElement=function(t){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete t.raw,("tag"==t.type||"script"==t.type||"style"==t.type)&&delete t.data),this._tagStack.last())if(t.type!=l.Text&&t.type!=l.Comment&&t.type!=l.Directive)if("/"==t.name.charAt(0)){var e=t.name.substring(1);if(!this.isEmptyTag(t)){for(var r=this._tagStack.length-1;r>-1&&this._tagStack[r--].name!=e;);if(r>-1||this._tagStack[0].name==e)for(;r<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(t),this.isEmptyTag(t)||this._tagStack.push(t);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(t);else t.type!=l.Text&&t.type!=l.Comment&&t.type!=l.Directive?"/"!=t.name.charAt(0)&&(this.dom.push(t),this.isEmptyTag(t)||this._tagStack.push(t)):this.dom.push(t)};var u={testElement:function(t,e){if(!e)return!1;for(var r in t)if("tag_name"==r){if("tag"!=e.type&&"script"!=e.type&&"style"!=e.type)return!1;if(!t.tag_name(e.name))return!1}else if("tag_type"==r){if(!t.tag_type(e.type))return!1}else if("tag_contains"==r){if("text"!=e.type&&"comment"!=e.type&&"directive"!=e.type)return!1;if(!t.tag_contains(e.data))return!1}else if(!e.attribs||!t[r](e.attribs[r]))return!1;return!0},getElements:function(t,e,r,n){function i(t){return function(e){return e==t}}if(r=void 0===r||null===r||!!r,n=isNaN(parseInt(n))?-1:parseInt(n),!e)return[];var a,o=[];for(var s in t)"function"!=typeof t[s]&&(t[s]=i(t[s]));if(u.testElement(t,e)&&o.push(e),n>=0&&o.length>=n)return o;if(r&&e.children)a=e.children;else{if(!(e instanceof Array))return o;a=e}for(var c=0;c<a.length&&(o=o.concat(u.getElements(t,a[c],r,n)),!(n>=0&&o.length>=n));c++);return o},getElementById:function(t,e,r){var n=u.getElements({id:t},e,r,1);return n.length?n[0]:null},getElementsByTagName:function(t,e,r,n){return u.getElements({tag_name:t},e,r,n)},getElementsByTagType:function(t,e,r,n){return u.getElements({tag_type:t},e,r,n)}};e.Parser=a,e.DefaultHandler=s,e.RssHandler=o,e.ElementType=l,e.DomUtils=u}()}).call(e,"/index.js","/")},function(t,e){(function(e){t.exports={mapForLoop:function(t,e){for(var r=t.length,n=new Array(r),i=0;r>i;i++)n[i]=e(t[i],i,t);return n},eachObject:function(t,e){for(var r in t)t.hasOwnProperty(r)&&(t[r]=e(t[r]));return t},inArray:function(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return!0;return!1},isNode:function(){return"[object process]"===Object.prototype.toString.call(e.process)},removeAroundQuotes:function(t){return t.replace(/^['"](.*)['"]$/,"$1")},removeAllSpaces:function(t){return t.replace(/\s/g,"")},clone:function r(t){function e(t,e,r){var n,i,a={};for(n in e)i=e[n],n in t&&(t[n]===i||n in a&&a[n]===i)||(t[n]=r?r(i):i);return t}if(!t||"object"!=typeof t||"[object Function]"===Object.prototype.toString.call(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var n,i,a;if(t instanceof Array)for(n=[],i=0,a=t.length;a>i;++i)i in t&&n.push(r(t[i]));else n=t.constructor?new t.constructor:{};return e(n,t,r)}}}).call(e,function(){return this}())},function(t,e,r){var n=r(3),i=r(5);t.exports={checkStatementForInners:function(t,e){var r,a=".",o=(t.split(a),n.inArray(e,t));return i.isExpression(t)&&o?(r=t.split(":"),i.createDataExpression(n.removeAroundQuotes(r[0]),r[1])):o===!0?i.createDataVar(t,void 0):i.createDataText(t)}}},function(t,e){t.exports={isTag:function(t){return"tag"===t},isText:function(t){return"text"===t},moduleMatcher:function(t){return void 0!==this._modules[t.name]?this._modules[t.name].module:!1},loadModuleFunction:function(t,e,r){var n=t(e,r);return n.call(this)},isTagInclude:function(t){return"include"===t},isExpression:function(t){return t.split(":").length>1},createDataVar:function(t,e){return{type:"var",name:t,value:e}},createDataText:function(t){return{type:"text",value:t}},createDataExpression:function(t,e){return{type:"expression",expression:e.trim(),value:t}}}},function(t,e,r){(function(e){var r=function(){"use strict";function t(t,r){t.forEach(function(t){e(t,r)})}return"function"!=typeof e&&(e=function(t,e){return setTimeout(function(){t(e)},0)}),{make:function n(){function e(t,e,r){var n="keep"===t?o:a;n[n.length]="function"!=typeof e?r[t]:function(t){try{var n=e(t);n&&n.is_promise===!0?n.when(r.keep,r["break"]):r.keep(n)}catch(i){throw new Error(i)}}}function r(e,r,n){if("pending"!==s)throw"overpromise";i=r,s=e,t(n,i),o.length=0,a.length=0}var i,a=[],o=[],s="pending";return{"break":function(t){r("broken",t,a)},keep:function(t){r("kept",t,o)},promise:{is_promise:!0,when:function(r,c){var l=n();switch(s){case"pending":e("keep",r,l),e("break",c,l);break;case"kept":e("keep",r,l),t(o,i);break;case"broken":e("break",c,l),t(a,i)}return l.promise}}}},every:function(t){var e=t.length,n=[],i=r.make();return e?t.forEach(function(t,r){t.when(function(t){n[r]=t,e-=1,0===e&&i.keep(n)},function(t){e=NaN,i["break"](t)})}):i["break"](t),i.promise},first:function(t){function e(){i-=1,0!==i||n||a["break"]()}var n=!1,i=t.length,a=r.make();return 0===i?a["break"](t):t.forEach(function(t){t.when(function(t){n||(n=!0,a.keep(t)),e()},e)}),a.promise},any:function(t){function e(){n-=1,0===n&&a.keep(i)}var n=t.length,i=[],a=r.make();return n?t.forEach(function(t,r){t.when(function(t){i[r]=t,e()},e)}):a.keep(i),a.promise},kept:function(t){var e=r.make();return e.keep(t),e.promise},broken:function(t){var e=r.make();return e["break"](t),e.promise}}}();t.exports=r}).call(e,r(7).setImmediate)},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var a=r(8).nextTick,o=Function.prototype.apply,s=Array.prototype.slice,c={},l=0;e.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=l++,n=arguments.length<2?!1:s.call(arguments,1);return c[r]=!0,a(function(){c[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete c[t]}}).call(e,r(7).setImmediate,r(7).clearImmediate)},function(t,e){function r(){l=!1,o.length?c=o.concat(c):u=-1,c.length&&n()}function n(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(o=c,c=[];++u<e;)o[u].run();u=-1,e=c.length}o=null,l=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function a(){}var o,s=t.exports={},c=[],l=!1,u=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new i(t,e)),1!==c.length||l||setTimeout(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,r){var n=r(10);t.exports={module:function(t){function e(t){return t}function r(){return n.call(this,a).when(e)}var i=(t.attribs.name.trim(),t.attribs.template.trim()),a=i+".tmpl";return function(){return r.call(this)}}}},function(t,e,r){var n,i=r(3),a=r(6);t.exports=function(o){function s(t){var e=new XMLHttpRequest;return e.open("GET",t),e.send(),e}function c(t){var e,r=a.make();try{e=requirejs("fs")}catch(n){throw new Error("There is no requirejs for node included")}return e.readFile("./"+t,function(t,e){t?r["break"](t):r.keep(this.parse(e))}.bind(this)),r.promise}function l(t){var e=a.make(),r=s(t);return r.onreadystatechange=function(){4==r.readyState&&200==r.status&&e.keep(this.parse(r.responseText))}.bind(this),e.promise}var u=i.isNode();return u===!1&&(n=function(){return{}}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))),u?c.call(this,o):l.call(this,o)}},function(t,e,r){var n=r(6);r(3);t.exports={module:function(t){function e(){var e=n.make();if(void 0===this._includeStack[r])throw new Error('Include tag for "'+r+'" is not found!');return this._includeStack[r].when(function(n){n?this.traversingAST(n).when(function(r){t.children=r,e.keep(t)},function(t){throw new Error(t)}):e["break"]('Include tag for "'+r+'" is not found!')}.bind(this),function(t){throw new Error(t)}),e.promise}var r=(t.attribs.data.trim(),t.attribs.template.trim());return function(){return e.call(this)}}}},function(t,e,r){var n=r(3),i=r(13),a=r(17),o=r(5);t.exports={_modules:{"if":r(18),"for":r(19),partial:r(20)},getHTMLString:function(t,e){return this._process(t,e)},_processModule:function(t,e){var r=o.moduleMatcher.call(this,t);return o.loadModuleFunction.call(this,r,t,e)},_whatMethodShouldYouUse:function(t){return o.isTag(t.type)?this._modules[t.name]?this._processModule:this._processTag:o.isText(t.type)?this._processText:void 0},_stopArrs:function(t){var e="";if("array"===a(t)){for(var r=0;r<t.length;r++)e+=t[r];return e}return t},_seek:function(t,e){var r=this._whatMethodShouldYouUse(t);return r?this._stopArrs(r.call(this,t,e)):void 0},_processDataTypes:function(t,e){var r=i(t,e);return void 0!==r&&null!==r?r:""},_processData:function(t,e){var r="";if(void 0!==t.length){for(var n=0;n<t.length;n++)r+=this._processDataTypes(t[n],e);return r}return this._processDataTypes(t,e)},_processAttributes:function(t,e){var r,i="";if(t){i+=" ";for(var a in t)t.hasOwnProperty(a)&&(r=this._processData(t[a].data,e),""!==n.removeAllSpaces(r)&&(i+=a+'="'+r+'"'))}return i},_processText:function(t,e){return this._processData(t.data,e)},_processTag:function(t,e){return"<"+t.name+this._processAttributes(t.attribs,e)+">"+this._process(t.children,e)+"</"+t.name+">"},_process:function(t,e){for(var r,n="",i=0;i<t.length;i++)r=this._seek(t[i],e),r&&(n+=r);return n}}},function(t,e,r){var n=r(14);t.exports=function(t,e){var r,i,a=".";{if("expression"!==t.type){if("var"===t.type){if(r=t.name.split(a),r.length>1){for(var o=0;o<r.length;o++)e.hasOwnProperty(r[o])&&0===o?i=e[r[o]]:i&&i.hasOwnProperty(r[o])&&(i=i[r[o]]);return i}return e[t.name]}return t.value}if(n(t.expression,e))return t.value}}},function(t,e,r){var n=r(15),i=r(3);t.exports=function(t,e){function r(t){for(var e=0;e<s.operators.length;e++)t=t.replace(s.operators[e].name,s.operators[e].value);return t}function a(t){for(var e=t.match(/([A-z]+)/g),r=e.length,n=[],a=0;r>a;){var o=e[a++];n.indexOf(o)<0&&!i.inArray(c,o)&&n.push(o)}return n}function o(t,e){return Function.apply(null,e.concat("return "+t))}var s={operators:[{name:" lt ",value:"<"},{name:" gt ",value:">"},{name:" le ",value:"<="},{name:" ge ",value:">="}]},c=["false","true","undefined","null"],t=r(t),l=a(t),u=o(t,l);return u.apply(this,n(l,e))}},function(t,e,r){var n=r(16);t.exports=function(t,e){for(var r,i=[],a=0;a<t.length;a++)e.hasOwnProperty(t[a])&&(r=n(t[a],e,t),r.isVar===!0&&i.push(r.value));return i}},function(t,e,r){var n=r(3);t.exports=function(t,e,r){function i(t,e,r){return t?{isVar:t,name:r,value:e}:{isVar:t,value:e}}var a,o=".",s=t.split(o),c=n.inArray(r,t);if(s.length>1){for(var l=0;l<s.length;l++)e.hasOwnProperty(s[l])&&0===l?a=e[s[l]]:a&&a.hasOwnProperty(s[l])&&(a=a[s[l]]);return i(c,a,t)}return c===!0?i(c,e[t],t):i(c,t)}},function(t,e){t.exports=function(t){for(var e=function(t){if(null===t)return"null";if(t&&(1===t.nodeType||9===t.nodeType))return"element";var e=Object.prototype.toString.call(t),r=e.match(/\[object (.*?)\]/)[1].toLowerCase();if("number"===r){if(isNaN(t))return"nan";if(!isFinite(t))return"infinity"}return r},r=["Null","Undefined","Object","Array","String","Number","Boolean","Function","RegExp","Element","NaN","Infinite"],n=function(t){e["is"+t]=function(r){return e(r)===t.toLowerCase()}},i=0;i<r.length;i++)n(r[i]);return e(t)}},function(t,e,r){var n=r(14);t.exports={module:function(t,e){function r(){return n(i,e)&&void 0!==t.children?this._process(t.children,e):void 0}var i;if(void 0===t.attribs.data.data)throw new Error('There is no data for "if" module to use');return i=t.attribs.data.data.value.trim(),function(){return void 0!==t.children?r.call(this):void 0}}}},function(t,e,r){var n=r(16),i=r(17),a=r(3);t.exports={module:function(t,e){function r(t){var e=t.split(m.key);return e.length>1?{key:e[0],value:e[1]}:{key:void 0,value:e[0]}}function o(t,e,r,n){return e[n.value]=t[r],n.key&&(e[n.key]=r),e}function s(e,r){for(var n=[],i=0;i<e.length;i++)n.push(this._process(a.clone(t.children),o(e,r,i,p)));return n}function c(e,r){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(this._process(a.clone(t.children),o(e,r,i,p)));return n}function l(t){var r=t.value,n=a.clone(e),o=d[i(r)];if(void 0===o)throw new Error("Wrong type in for statement arguments");return d[i(r)].call(this,r,n)}var u,h,p,f,d={array:s,object:c},m={splittingKey:" in ",key:" as "};if(void 0===t.attribs.data.data)throw new Error('There is no data for "for" module to use');if(u=t.attribs.data.data.value.trim(),h=u.split(m.splittingKey),h.length<2)throw new Error("Wrong arguments in for statement");if(f=n(h[1],e,[h[1]]),!f.value)throw new Error(f.name+" variable is undefined");return p=r(h[0]),function(){return void 0!==t.children?l.call(this,f):void 0}}}},function(t,e,r){var n=r(3);t.exports={module:function(t,e){function r(){var r=n.clone(e);return o[a]=r[i],this._process(t.children,o)}var i=t.attribs.data.trim(),a=(t.attribs.template.trim(),"root"),o={};return function(){return r.call(this)}}}}])});